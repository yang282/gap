"use strict";var gameEnging={ele:null,allBullets:[],allEnemys:[],totalScore:0,inlt:function(){return this.ele=document.getElementById("main"),this},start:function(){console.log("游戏开始"),this.loading(function(){myPlane.inlt().move(),myPlane.fire(),gameEnging.listenKeybord(),gameEnging.createEnemy(),gameEnging.crash(),gameEnging.moveBackground()})},loading:function(e){var n=document.createElement("div");gameEnging.ele.appendChild(n),n.className="logo";var l=document.createElement("div");gameEnging.ele.appendChild(l),l.className="load";var a=["images2/loading1.png","images2/loading2.png","images2/loading3.png"],t=0,o=setInterval(function(){t>=5?(clearInterval(o),gameEnging.ele.removeChild(n),gameEnging.ele.removeChild(l),e&&e()):l.style.backgroundImage="url("+a[++t%3]+")"},300)},listenKeybord:function(){var e=0,n=0;window.onkeydown=function(l){37==(l=l||event).keyCode?e=-10:39==l.keyCode?e=10:38==l.keyCode?n=-10:40==l.keyCode&&(n=10)},window.onkeyup=function(l){37==(l=l||event).keyCode||39==l.keyCode?e=0:38!=l.keyCode&&40!=l.keyCode||(n=0)},setInterval(function(){var l=myPlane.ele.offsetLeft+e;l<0&&(l=0),l>gameEnging.ele.offsetWidth-myPlane.ele.offsetWidth&&(l=gameEnging.ele.offsetWidth-myPlane.ele.offsetWidth),myPlane.ele.style.left=l+"px",myPlane.ele.style.top=myPlane.ele.offsetTop+n+"px"},30)},createEnemy:function(){setInterval(function(){Math.random()>.6&&new Enemy(Enemy.prototype.Enemy_Type_Large).init().move()},4e3),setInterval(function(){Math.random()>.5&&new Enemy(Enemy.prototype.Enemy_Type_Middle).init().move()},2e3),setInterval(function(){Math.random()>.3&&new Enemy(Enemy.prototype.Enemy_Type_Small).init().move()},1e3)},crash:function(){var e=setInterval(function(){for(var n=0;n<gameEnging.allEnemys.length;n++){for(var l=0;l<gameEnging.allBullets.length;l++)isCrash(gameEnging.allEnemys[n].ele,gameEnging.allBullets[l].ele)&&(gameEnging.allBullets[l].boom(),gameEnging.allBullets.splice(l,1),gameEnging.allEnemys[n].hurt());if(isCrash(gameEnging.allEnemys[n].ele,myPlane.ele)){clearInterval(e),myPlane.boom(function(){var e=prompt("您的大名， 您当前的分数是:"+gameEnging.totalScore,"");ajax({type:"post",url:"http://60.205.181.47/myPHPCode4/uploadScore.php",data:{name:e,score:gameEnging.totalScore},success:function(e){console.log("提交成功: "+e),location.href="rand.html"}})});break}}},30)},moveBackground:function(){var e=0;setInterval(function(){gameEnging.ele.style.backgroundPositionY=e+++"px"},30)}};